### **Сопроводительная документация к проекту "Отсечение отрезков"**

---

## **Содержание**
1. [Описание проекта](#описание-проекта)
2. [Руководство для пользователя](#руководство-для-пользователя)
3. [Руководство для программиста](#руководство-для-программиста)
4. [Ссылка на сайт](#ссылка-на-сайт)

---

## **Описание проекта**

Проект представляет собой реализацию **алгоритма отсечения отрезков методом Коэна-Сазерленда**. Визуализация выполняется на HTML5-канвасе с использованием **JavaScript**.  

- Отрезки и окно отсечения вводятся пользователем через текстовую область.  
- Программа отслеживает масштабирование и перемещение сцены с сеткой.  
- Отрезки, находящиеся внутри окна отсечения, окрашиваются в **красный цвет**.

---

## **Руководство для пользователя**

### **1. Ввод данных**
1. В текстовую область необходимо ввести данные в следующем формате:
   ```
   N
   x1 y1 x2 y2
   x1 y1 x2 y2
   ...
   xmin ymin xmax ymax
   ```
   - `N` – количество отрезков.
   - `x1 y1 x2 y2` – координаты концов каждого отрезка.
   - `xmin ymin xmax ymax` – координаты прямоугольного окна отсечения.

2. **Пример ввода**:
   ```
   2
   -200 -100 200 100
   -300 200 300 -200
   -100 -100 100 100
   ```

### **2. Управление**
- **Масштабирование**:  
   Используйте **ползунок "Масштаб"** для изменения масштаба сцены. Значение масштаба отображается рядом с ползунком.

- **Перемещение сцены**:  
   Зажмите **левую кнопку мыши** и двигайте мышь для перемещения сетки.

- **Запуск алгоритма**:  
   Нажмите кнопку **"Запустить"**, чтобы выполнить алгоритм отсечения и отобразить результат.

---

### **3. Визуальные элементы**
- **Сетка**:  
   Отображает координатную сетку с шагом 100 единиц.

- **Отрезки**:  
   - Чёрный цвет – исходные отрезки.
   - Красный цвет – отсечённые отрезки.

- **Окно отсечения**:  
   Прямоугольник, отображаемый синим цветом.

---

## **Руководство для программиста**

### **1. Структура проекта**
Проект состоит из трёх основных файлов:
- **index.html** – разметка страницы.
- **styles.css** – стилизация элементов.
- **script.js** – основная логика программы.

---

### **2. Основные компоненты**

#### **2.1. Инициализация сцены**
На странице создаётся HTML5-канвас для рисования:
```javascript
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
```

#### **2.2. Рисование сетки**
Функция `drawGrid()` рисует сетку и координатные оси с шагом 100 единиц:
```javascript
function drawGrid() {
    for (let x = offsetX % (gridSpacing * scale); x < canvas.width; x += gridSpacing * scale) { ... }
    for (let y = offsetY % (gridSpacing * scale); y < canvas.height; y += gridSpacing * scale) { ... }
}
```

#### **2.3. Алгоритм Коэна-Сазерленда**
Алгоритм реализован в функции `sutherlandCohen(segment, clip)`:
- **computeOutcode** – вычисляет коды выхода для точек.
- Исходные отрезки проверяются на пересечение с окном отсечения:
```javascript
if ((outcode1 | outcode2) === 0) {
    return [x1, y1, x2, y2]; // Полностью внутри
} else if ((outcode1 & outcode2) !== 0) {
    return null; // Полностью снаружи
}
```

#### **2.4. Обновление сцены**
Функция `drawScene()` отрисовывает сетку, окно отсечения, исходные и отсечённые отрезки:
```javascript
segments.forEach(segment => { ... });
ctx.strokeRect(x1, y1, x2 - x1, y2 - y1);
```

#### **2.5. Масштабирование и перемещение**
Масштаб и сдвиг сцены управляются через события:
- **Масштабирование**:
```javascript
document.getElementById('zoom').addEventListener('input', function () {
    scale = parseFloat(this.value);
    drawScene();
});
```
- **Перемещение**:
```javascript
canvas.addEventListener('mousemove', (e) => { ... });
```

---

### **3. Взаимодействие с пользователем**
- **Поле ввода** (`<textarea>`) – для данных о отрезках и окне отсечения.
- **Ползунок** – масштабирует сцену.
- **Кнопка "Запустить"** запускает алгоритм и выводит результат.

---

## **Ссылка на сайт**
https://gvazidra.github.io/pcg_lab5_13/

---
